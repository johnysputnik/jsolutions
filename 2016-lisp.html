<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Language for 2016 - Common Lisp</title>
<!-- 2016-04-24 Sun 08:28 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="John Cumming" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet"
                         href="/css/solarized-dark.css"
                         type="text/css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<div id="my-header"><h2>jSolutions | <a href="/index.html">home</a></h2></div>
</div>
<div id="content">
<h1 class="title">Language for 2016 - Common Lisp</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Introduction</a></li>
<li><a href="#sec-2">An Overview of Common Lisp Syntax</a></li>
<li><a href="#sec-3">Example 1 - Sum of Square Errors</a></li>
<li><a href="#sec-4">Core functions</a></li>
<li><a href="#sec-5">Data Structures</a>
<ul>
<li><a href="#sec-5-1">Atoms</a></li>
<li><a href="#sec-5-2">Sequences</a>
<ul>
<li><a href="#sec-5-2-1">Arrays and Vectors</a></li>
<li><a href="#sec-5-2-2">Strings</a></li>
<li><a href="#sec-5-2-3">Lists</a></li>
<li><a href="#sec-5-2-4"><span class="todo NEXT">NEXT</span> Manipulating Sequences</a></li>
</ul>
</li>
<li><a href="#sec-5-3"><span class="todo TODO">TODO</span> Hash Tables</a></li>
<li><a href="#sec-5-4"><span class="todo TODO">TODO</span> Trees</a></li>
<li><a href="#sec-5-5"><span class="todo TODO">TODO</span> Association Lists</a></li>
<li><a href="#sec-5-6"><span class="todo TODO">TODO</span> Property Lists</a></li>
<li><a href="#sec-5-7"><span class="todo TODO">TODO</span> Records</a></li>
<li><a href="#sec-5-8"><span class="todo TODO">TODO</span> Structures</a></li>
<li><a href="#sec-5-9"><span class="todo TODO">TODO</span> Classes</a></li>
</ul>
</li>
<li><a href="#sec-6"><span class="todo TODO">TODO</span> Creating Variables</a></li>
<li><a href="#sec-7"><span class="todo TODO">TODO</span> Functions</a></li>
<li><a href="#sec-8"><span class="todo TODO">TODO</span> Example 2</a>
<ul>
<li><a href="#sec-8-1"><span class="todo TODO">TODO</span> Decide on an example that uses the above.</a></li>
</ul>
</li>
<li><a href="#sec-9"><span class="todo TODO">TODO</span> Declare, declaim, proclaim</a></li>
<li><a href="#sec-10"><span class="todo TODO">TODO</span> Control Operations</a></li>
<li><a href="#sec-11"><span class="todo TODO">TODO</span> Error Handling</a></li>
<li><a href="#sec-12"><span class="todo TODO">TODO</span> Lazyiness</a></li>
<li><a href="#sec-13"><span class="todo TODO">TODO</span> Streams</a></li>
<li><a href="#sec-14"><span class="todo TODO">TODO</span> Macro Dispatching Characters</a></li>
<li><a href="#sec-15"><span class="todo TODO">TODO</span> Macros</a></li>
<li><a href="#sec-16"><span class="todo TODO">TODO</span> Multimethods</a></li>
<li><a href="#sec-17"><span class="todo TODO">TODO</span> CLOS</a></li>
<li><a href="#sec-18"><span class="todo TODO">TODO</span> Packages</a></li>
<li><a href="#sec-19"><span class="todo TODO">TODO</span> Standard Libraries</a></li>
<li><a href="#sec-20"><span class="todo TODO">TODO</span> Important Libraries</a></li>
<li><a href="#sec-21"><span class="todo TODO">TODO</span> Example 3</a></li>
<li><a href="#sec-22"><span class="todo TODO">TODO</span> Working with GNU Emacs and Slime</a></li>
<li><a href="#sec-23"><span class="todo TODO">TODO</span> Something about read eval</a></li>
<li><a href="#sec-24"><span class="todo TODO">TODO</span> Something about lisp development workflow</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
I have chosen common lisp as my language to learn in more depth for
2016 as I have dabbled with it over the past year or so, along with
clojure, another very good lisp based language.
</p>

<p>
I chose common lisp as a language as I prefer the syntax over
clojure and because I believe it should be able to produce more
efficient code as well as being able to produce stand alone binary
files without the dependence on the JVM that clojure has.
</p>

<p>
I have no specific plan as to how this learning will pan out, other
than I intend to dive a bit deeper than I have done in the past.
</p>

<p>
The tools I use for this learning are SBCL and GNU Emacs with
Slime. This is all running under OS-X El Capitan on a Macbook pro.
</p>

<p>
The complete source code for this article can be found <a href="2016-lisp.lisp">here</a> and the
article formatted as PDF <a href="2016-lisp.pdf">here</a>. The org-mode file used to generate
this web page and the lisp code can be found <a href="2016-lisp.html">here</a>.
</p>

<p>
Some books I have on lisp can be found <a href="books.html#sec-5-2">here</a>.
</p>

<p>
I have inter-dispersed larger examples through the code that
hopefully build on the sections that have preceded.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">An Overview of Common Lisp Syntax</h2>
<div class="outline-text-2" id="text-2">
<p>
Common lisp has a simple syntax for processing lists delimited by '('
and ')'. The lisp processes a list by applying the the first item in
the list as an operator and the rest as operands. Lists can be
nested:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">1: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">Comments can be added using a semi colon</span>
<span class="linenr">2: </span>(+
<span class="linenr">3: </span> (* 3 4)
<span class="linenr">4: </span> (+ 2 3))
</pre>
</div>
<p>
This code applies operand '+' to the result of applying operand '*'
to 3 and 4, and the result of applying operand '+' to 2 and 3.
</p>

<p>
A list can be created as a just list of data, by using the 'quote'
operand or by using a shortcut single quote, the following are both
equivalent:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">5: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">The following lines are equivalent</span>
<span class="linenr">6: </span>(equal (quote (1 2 3 4))
<span class="linenr">7: </span>       '(1 2 3 4))
<span class="linenr">8: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<p>
More details on collections can be found in <i>Collections</i>.
</p>

<p>
String are, like most languages, delimited with double quotes.
</p>

<p>
Backslashes are used as escape characters, much like other
languages. However, the use of a vertical bar allows special
characters to be used without escaping:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr"> 9: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">The following items in the list are equivalent</span>
<span class="linenr">10: </span>(equal 'A\(B\) '|A(B)|)
<span class="linenr">11: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<p>
A hash symbol is a macro symbol, known as the dispatching macro
character. There are many of these, for example:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">12: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">#' - function abbreviation</span>
<span class="linenr">13: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">#\ - character object</span>
<span class="linenr">14: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">,#+ - read-time conditional</span>
<span class="linenr">15: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">#c - complex number</span>
<span class="linenr">16: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">#( - vector</span>
</pre>
</div>

<p>
More details can be found in <i>Macro Dispatching Characters</i>.
</p>

<p>
A back quote can be used to allow a template to be used when
generating code, with a comma used to evaluate a form and an '@'
symbol used to splice a list into the template, for example:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">17: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">x</span> '(a b c))
<span class="linenr">18: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">x</span>
<span class="linenr">19: </span>`(x)
<span class="linenr">20: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (x)</span>
<span class="linenr">21: </span>`(,x)
<span class="linenr">22: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; ((a b c))</span>
<span class="linenr">23: </span>`(,@x)
<span class="linenr">24: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (a b c)</span>
<span class="linenr">25: </span>`(x ,x ,@x foo ,(cadr x) bar ,(cdr x) baz ,@(cdr x))
<span class="linenr">26: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (x (a b c) a b c foo b bar (b c) baz b c)</span>
</pre>
</div>

<p>
This is used extensively when writing macros. For more information
on macros see <a href="#sec-15">Macros</a>.
</p>

<p>
Colons are used in 2 situations. Firstly it can be used to indicate
the package in which a symbol is defined:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">27: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">reset is a symbol in the network package</span>
<span class="linenr">28: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">(network:reset)</span>
</pre>
</div>

<p>
Packages are discussed in <a href="#sec-18">Packages</a>.
</p>

<p>
It can also be used to denote a keyword, which is a symbol that
always evaluates to itself and is constant. For example:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">29: </span>(eql '<span style="color: #859900;">:foo</span> <span style="color: #859900;">:foo</span>)
<span class="linenr">30: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<p>
Keywords are interned in the package KEYWORD and are automatically
exported from it:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">31: </span>(eql keyword:foo <span style="color: #859900;">:foo</span>)
<span class="linenr">32: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Example 1 - Sum of Square Errors</h2>
<div class="outline-text-2" id="text-3">
<p>
An equation that is used in regression algorithms is the sum of
the square of errors for a given dataset and function being fitted
to the data.
</p>

<p>
Given a data set of size \(m\) with a single input variable \(x\) and a
single output value \(y\) for each item in the data set
and a function that is an attempt to fit a function to the values:
</p>

<p>
$$y = f(x)$$
</p>

<p>
Then an error can be calculated based on the sum of the square of
the individual errors, giving an estimate of how well fitted the
function is to the date:
</p>

<p>
$$E = \sum_{n=0}^m(f(x_n) - y_n)^2$$
</p>

<p>
Using lisp, we can write some code that takes a data set, computes
the error based on several functions:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">33: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">First declare some data</span>
<span class="linenr">34: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">35: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">data</span> '((0.1 . 1.1)
<span class="linenr">36: </span>                     (0.9 . 3.2)
<span class="linenr">37: </span>                     (2.1 . 5.9)
<span class="linenr">38: </span>                     (3.2 . 7.2)
<span class="linenr">39: </span>                     (3.9 . 9.0)
<span id="coderef-data-1" class="coderef-off"><span class="linenr">40: </span>                     (5.1 . 11.2)))</span>
<span class="linenr">41: </span>
<span class="linenr">42: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">then some equations</span>
<span class="linenr">43: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">44: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">equation-list</span>
<span class="linenr">45: </span>  (list #'(<span style="color: #859900;">lambda</span> (x) (+ 1 (* 2 x)))
<span class="linenr">46: </span>        #'(<span style="color: #859900;">lambda</span> (x) (+ 1 (* x x)))
<span id="coderef-eqn-1" class="coderef-off"><span class="linenr">47: </span>        #'(<span style="color: #859900;">lambda</span> (x) (+ 1 x))))</span>
<span class="linenr">48: </span>
<span class="linenr">49: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">now create a function that applies a function</span>
<span class="linenr">50: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">to a set of input data</span>
<span class="linenr">51: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">52: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">apply-function</span> (f d)
<span id="coderef-apply-1" class="coderef-off"><span class="linenr">53: </span>  (map 'list #'(<span style="color: #859900;">lambda</span> (x) (funcall f (car x))) d))</span>
<span class="linenr">54: </span>
<span class="linenr">55: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">A function that returns the error as the difference</span>
<span class="linenr">56: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">between two values squared</span>
<span class="linenr">57: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span id="coderef-sq-1" class="coderef-off"><span class="linenr">58: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">square-error</span> (test-data calc-data)</span>
<span class="linenr">59: </span>  (expt (- test-data calc-data) 2))
<span class="linenr">60: </span>
<span class="linenr">61: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">A function that returns the sum of square errors</span>
<span class="linenr">62: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">of a collection of data and the results</span>
<span class="linenr">63: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span id="coderef-sumsq-1" class="coderef-off"><span class="linenr">64: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">sum-square-error</span> (f test-data)</span>
<span class="linenr">65: </span>  (reduce #'+
<span class="linenr">66: </span>          (map 'list
<span class="linenr">67: </span>               #'(<span style="color: #859900;">lambda</span> (test calc)
<span class="linenr">68: </span>                   (square-error (cdr test) calc))
<span class="linenr">69: </span>               test-data (apply-function f test-data))))
<span class="linenr">70: </span>
<span class="linenr">71: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">Now we can run the sum of square errors across all equations</span>
<span class="linenr">72: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span id="coderef-output-1" class="coderef-off"><span class="linenr">73: </span>(map 'list #'(<span style="color: #859900;">lambda</span> (eq) (sum-square-error eq data))</span>
<span class="linenr">74: </span>     equation-list)
</pre>
</div>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="right" />

<col  class="right" />
</colgroup>
<tbody>
<tr>
<td class="right">0.7400005</td>
<td class="right">320.44208</td>
<td class="right">61.350002</td>
</tr>
</tbody>
</table>

<p>
The <a href="#coderef-data-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-data-1');" onmouseout="CodeHighlightOff(this, 'coderef-data-1');">data</a> is defined as a set of cons cells with the car equal to an x
value and the cdr equal to a y value. This is the test data that will
be used to check the equations. It uses defparameter, but could
equally be defined inline at <a href="#coderef-output-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-output-1');" onmouseout="CodeHighlightOff(this, 'coderef-output-1');">Line 73</a>.
</p>

<p>
The <a href="#coderef-eqn-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-eqn-1');" onmouseout="CodeHighlightOff(this, 'coderef-eqn-1');">equations</a> are defined as a list of lambda functions modeling the
following equations for fitting to the data:
</p>

<p>
\(y=2x+1\)
</p>

<p>
\(y=x^2+1\)
</p>

<p>
\(y=x+1\)
</p>

<p>
Again, these could have been defined inline at the point of use. 
</p>

<p>
The <a href="#coderef-apply-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-apply-1');" onmouseout="CodeHighlightOff(this, 'coderef-apply-1');">apply-function</a> function takes a function as an argument and a
collection of data as an alist and executes the function taking the
car of each item in the alist as the x value to calculate the y value.
</p>

<p>
The <a href="#coderef-sq-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-sq-1');" onmouseout="CodeHighlightOff(this, 'coderef-sq-1');">square-error</a> function takes a single test data y value and a
single calculated value and calculates the square of the error.
</p>

<p>
The <a href="#coderef-sumsq-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-sumsq-1');" onmouseout="CodeHighlightOff(this, 'coderef-sumsq-1');">sum-square-error</a> function takes a function f and applies the
<i>square-error</i> function to each item in the test data and the
corresponding calculated output as calculated by the function f.
</p>

<p>
The <a href="#coderef-output-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-output-1');" onmouseout="CodeHighlightOff(this, 'coderef-output-1');">output</a> is generated by applying the  <a href="#coderef-sumsq-1"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-sumsq-1');" onmouseout="CodeHighlightOff(this, 'coderef-sumsq-1');">sum-square-error</a> function to
each equation using the test data.
</p>

<p>
It can clearly be seen from both the results of the sum of square
errors and the input data that eqn1 is the best fit.
</p>

<p>
To confirm this we can plot the data:
</p>

<table id="example1-plot-data" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="right">x</th>
<th scope="col" class="right">data</th>
<th scope="col" class="right">eqn1</th>
<th scope="col" class="right">eqn2</th>
<th scope="col" class="right">eqn3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">0.1</td>
<td class="right">1.1</td>
<td class="right">1.3</td>
<td class="right">1.01</td>
<td class="right">1.1</td>
</tr>

<tr>
<td class="right">0.9</td>
<td class="right">3.2</td>
<td class="right">2.8</td>
<td class="right">1.81</td>
<td class="right">1.9</td>
</tr>

<tr>
<td class="right">2.1</td>
<td class="right">5.9</td>
<td class="right">5.2</td>
<td class="right">5.41</td>
<td class="right">3.1</td>
</tr>

<tr>
<td class="right">3.2</td>
<td class="right">7.2</td>
<td class="right">7.4</td>
<td class="right">11.24</td>
<td class="right">4.2</td>
</tr>

<tr>
<td class="right">3.9</td>
<td class="right">9.0</td>
<td class="right">8.8</td>
<td class="right">16.21</td>
<td class="right">4.9</td>
</tr>

<tr>
<td class="right">5.1</td>
<td class="right">11.2</td>
<td class="right">11.2</td>
<td class="right">27.01</td>
<td class="right">6.1</td>
</tr>
</tbody>
</table>

<p>
using this gnuplot script:
</p>

<div class="org-src-container">

<pre class="src src-gnuplot"><span style="color: #2aa198;">set</span> terminal png nocrop enhanced size 400,400
<span style="color: #2aa198;">set</span> key left box <span style="color: #b58900;">linestyle</span> -1
<span style="color: #2aa198;">set</span> xlabel <span style="color: #2aa198;">'x'</span>
<span style="color: #2aa198;">set</span> ylabel <span style="color: #2aa198;">'y'</span>
<span style="color: #2aa198;">set</span> <span style="color: #b58900;">title</span> <span style="color: #2aa198;">'equation fit'</span>
<span style="color: #859900;">plot</span> data u 1:2 w p <span style="color: #b58900;">lw</span> 2 <span style="color: #b58900;">title</span> <span style="color: #2aa198;">'data'</span>, \
     data u 1:3 <span style="color: #b58900;">smooth</span> csplines <span style="color: #b58900;">lw</span> 1 <span style="color: #b58900;">title</span> <span style="color: #2aa198;">'eqn1'</span>, \
     data u 1:4 <span style="color: #b58900;">smooth</span> csplines <span style="color: #b58900;">lw</span> 1 <span style="color: #b58900;">title</span> <span style="color: #2aa198;">'eqn2'</span>, \
     data u 1:5 <span style="color: #b58900;">smooth</span> csplines <span style="color: #b58900;">lw</span> 1 <span style="color: #b58900;">title</span> <span style="color: #2aa198;">'eqn3'</span>
</pre>
</div>

<div class="figure">
<p><img src="example1-plot.png" alt="example1-plot.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Core functions</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>cons

<p>
cons is used to construct lists, it puts a new element at the end
of the list, or can be used for creating a pair:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">75: </span>(cons 1 3)
<span class="linenr">76: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (1 . 3)</span>
<span class="linenr">77: </span>(cons 3 nil)
<span class="linenr">78: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (3)</span>
<span class="linenr">79: </span>(cons 5 '(1 2 3 4))
<span class="linenr">80: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (5 1 2 3 4)</span>
</pre>
</div>

<ul class="org-ul">
<li>car

<p>
Given a list car retrieves the first item in a list:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">81: </span>(car '(1 2 3 4))
<span class="linenr">82: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 1</span>
</pre>
</div>

<ul class="org-ul">
<li>cdr

<p>
Given a list cdr retrieves the remaining list after the first
element
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">83: </span>(cdr '(1 2 3 4))
<span class="linenr">84: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (2 3 4)</span>
</pre>
</div>

<ul class="org-ul">
<li>cadr / cddr etc

<p>
These can be nested to various levels for example:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">85: </span>(cadr '(1 2 3 5))
<span class="linenr">86: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">87: </span>(cddr '(1 2 3 4))
<span class="linenr">88: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (3 4)</span>
</pre>
</div>

<ul class="org-ul">
<li>lambda

<p>
lambda is used to create a function special form involving a
lambda expression. The expression takes a lambda list and a form
and returns a function:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">89: </span>(<span style="color: #859900;">lambda</span> (x) (+ 1 x))
<span class="linenr">90: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; #&lt;FUNCTION (LAMBDA (X)) {10035B665B}&gt;</span>
</pre>
</div>

<ul class="org-ul">
<li>funcall

<p>
Funcall is used to call a function, which can be created with a
lambda.  However it becomes more useful when passing lambda expressions or
functions as arguments (a little convoluted):
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">91: </span>(funcall (<span style="color: #859900;">lambda</span> (x) (+ 1 x)) 3)
<span class="linenr">92: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 4</span>
<span class="linenr">93: </span>
<span class="linenr">94: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">do-something</span> (x a)
<span class="linenr">95: </span>  (funcall x a))
<span class="linenr">96: </span>(<span style="color: #859900;">do-something</span> (<span style="color: #859900;">lambda</span> (x) (+ 1 x)) 2)
<span class="linenr">97: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 3</span>
</pre>
</div>

<ul class="org-ul">
<li>function

<p>
With the function function we can return a function from a
function! This can be used to create a form of partial functions:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr"> 98: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">multiplier</span> (n)
<span class="linenr"> 99: </span>  (function (<span style="color: #859900;">lambda</span> (x) (* x n))))
<span class="linenr">100: </span>
<span class="linenr">101: </span>(funcall (multiplier 3) 4)
<span class="linenr">102: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 12</span>
<span class="linenr">103: </span>
<span class="linenr">104: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">doubler</span> (n)
<span class="linenr">105: </span>  (funcall (multiplier 2) n))
<span class="linenr">106: </span>
<span class="linenr">107: </span>(doubler 10)
<span class="linenr">108: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 20</span>
</pre>
</div>

<ul class="org-ul">
<li>apply

<p>
The apply function is very similar to funcall, except it takes a
list as an argument. This means that it can be used when the
number of arguments is unknown at compile time.
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">109: </span>(apply #'+ 100 '(4 5 6 7))
<span class="linenr">110: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 122</span>
<span class="linenr">111: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">add-to-ten</span> (<span style="color: #b58900;">&amp;rest</span> args)
<span class="linenr">112: </span>  (apply #'+ 10 args))
<span class="linenr">113: </span>(add-to-ten 1 2 3 4 5)
<span class="linenr">114: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 25</span>
</pre>
</div>

<ul class="org-ul">
<li>read

<p>
The read function reads a single s-expression, skipping whitespace
and comments and returns the lisp object denoted by the
s-expression.
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">115: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">given a file code.lisp containing</span>
<span class="linenr">116: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">117: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">(1 2 3)</span>
<span class="linenr">118: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">456</span>
<span class="linenr">119: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">"a string" ; this is a comment</span>
<span class="linenr">120: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">((a b)</span>
<span class="linenr">121: </span><span style="color: #586e75; font-style: italic;">;;  </span><span style="color: #586e75; font-style: italic;">(c d))</span>
<span class="linenr">122: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">123: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*s*</span> (open <span style="color: #2aa198;">"code.lisp"</span>))
<span class="linenr">124: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; *S*</span>
<span class="linenr">125: </span>(read *s*)
<span class="linenr">126: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (1 2 3)</span>
<span class="linenr">127: </span>(read *s*)
<span class="linenr">128: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 456</span>
<span class="linenr">129: </span>(read *s*)
<span class="linenr">130: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "a string"</span>
<span class="linenr">131: </span>(read *s*)
<span class="linenr">132: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">((A B) (C D))</span>
<span class="linenr">133: </span>(close *s*)
<span class="linenr">134: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<ul class="org-ul">
<li>eval

<p>
The eval function just evaluates a lisp expression. It is used in
combination with read to execute lisp expressions:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">135: </span>(eval (+ 1 2))
<span class="linenr">136: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 3</span>
<span class="linenr">137: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">given a file code.lisp with a line</span>
<span class="linenr">138: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">(+ 1 2)</span>
<span class="linenr">139: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*s*</span> (open <span style="color: #2aa198;">"code.lisp"</span>))
<span class="linenr">140: </span>(eval (read *s*))
<span class="linenr">141: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 3</span>
</pre>
</div>

<ul class="org-ul">
<li>print

<p>
The print function prints the representation of a lisp object.
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">142: </span>(print 2)
<span class="linenr">143: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">2</span>
<span class="linenr">144: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">145: </span>(print (eval (+ 1 2)))
<span class="linenr">146: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">3</span>
<span class="linenr">147: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 3</span>
</pre>
</div>

<ul class="org-ul">
<li>cond

<p>
The primary conditional statement in lisp is the cond function:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">148: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">get-type-name</span> (a)
<span class="linenr">149: </span>  (<span style="color: #859900;">cond</span> ((null a) <span style="color: #2aa198;">"null"</span>)
<span class="linenr">150: </span>        ((atom a) <span style="color: #2aa198;">"atom"</span>)
<span class="linenr">151: </span>        ((listp a) <span style="color: #2aa198;">"list"</span>)
<span class="linenr">152: </span>        (t <span style="color: #2aa198;">"unknown"</span>)))
<span class="linenr">153: </span>(get-type-name nil)
<span class="linenr">154: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "null"</span>
<span class="linenr">155: </span>(get-type-name 1)
<span class="linenr">156: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "atom"</span>
<span class="linenr">157: </span>(get-type-name '(1))
<span class="linenr">158: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "list"</span>
</pre>
</div>

<ul class="org-ul">
<li>quote

<p>
The quote function is described <i>above</i>.
</p>
</li>

<li>atom

<p>
The atom function is outlined <a href="#sec-5-1">below</a>.
</p>
</li>

<li>null

<p>
The null function determines if a symbol is nil:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">159: </span>(null nil)
<span class="linenr">160: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">161: </span>(null 1)
<span class="linenr">162: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; nil</span>
<span class="linenr">163: </span>(null '())
<span class="linenr">164: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<ul class="org-ul">
<li>set, setf and setq

<p>
set is the original lisp function. setf is a shorthand function
meaning set field and setq a shorthand function meaning
set quote. One can think of set as setting value of symbols and
setf as setting the value of variables. setf is a macro allowing
various setting of things.
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">165: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">The following are all equivalent</span>
<span class="linenr">166: </span>(set (quote *foo*) 42)
<span class="linenr">167: </span>(setf (symbol-value '*foo*) 42)
<span class="linenr">168: </span>(set '*foo* 42)
<span class="linenr">169: </span>(setq *foo* 42)
<span class="linenr">170: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">assigning to data structure</span>
<span class="linenr">171: </span>(setf (car x) 42)
<span class="linenr">172: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">some more examples</span>
<span class="linenr">173: </span>(set ls '(1 2 3 4))   <span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">ERROR ls has no value</span>
<span class="linenr">174: </span>(set 'ls '(1 2 3 4))  <span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">OK</span>
<span class="linenr">175: </span>(setq ls '(1 2 3 4))  <span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">OK</span>
<span class="linenr">176: </span>(setf ls '(1 2 3 4))  <span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">OK</span>
<span class="linenr">177: </span>(setf (car ls) 10)    <span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">ls -&gt; '(10 2 3 4)</span>
</pre>
</div>

<ul class="org-ul">
<li>defvar and defparameter

<p>
defvar and defparameter are very similar, both bind a value to a
name. the difference is that defvar only binds the value if it is
not already bound. However, the value can still be changed with
setq:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">178: </span>(<span style="color: #859900;">defvar</span> <span style="color: #268bd2;">*s*</span> 2)
<span class="linenr">179: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; *S*</span>
<span class="linenr">180: </span>*s*
<span class="linenr">181: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">182: </span>(<span style="color: #859900;">defvar</span> <span style="color: #268bd2;">*s*</span> 3)
<span class="linenr">183: </span>*s*
<span class="linenr">184: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">185: </span>(setq *s* 3)
<span class="linenr">186: </span>*s*
<span class="linenr">187: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 3</span>
<span class="linenr">188: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*t*</span> 2)
<span class="linenr">189: </span>*t*
<span class="linenr">190: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">191: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*t*</span> 3)
<span class="linenr">192: </span>*t*
<span class="linenr">193: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt;3</span>
</pre>
</div>

<ul class="org-ul">
<li>defconstant

<p>
defconstant is similar to defparameter and defvar, except the
value cannot be changed.
</p>
</li>

<li>defun

<p>
defun defines a function that can be called from other parts of
code. They are the primary abstraction mechanism in lisp and are
described <a href="#sec-7">below</a>.
</p>
</li>

<li>defmacro

<p>
defmacro is used to define macros that are evaluated during
compilation, they are discussed <a href="#sec-15">below</a>.
</p>
</li>

<li>equality predicates

<p>
There are several equality operators in lisp that perform
different functions:
</p>

<p>
(eq x y) is true if and only if x and y are identical objects.
</p>

<p>
(eql x y) is true if (eq x y) or x and y are numbers of the same
type and have the same value, or are character objects that
represent the same character.
</p>

<p>
(equal x y) is true if x and y are structurally similar
(isomorphic). It is often the case that x and y will have the same
printed representation.
</p>

<p>
(equalp x y) is true if (equal x y) is true or for numbers they
have the same value even if they are different types or for
characters that are equal but different case. For collections,
(equalp x y) is true if equalp is true for every element in the
collection.
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Data Structures</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">Atoms</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Atoms are things that are not cons cells, and can be tested using
the atom predicate:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">194: </span>(atom 1)
<span class="linenr">195: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">196: </span>(atom <span style="color: #859900;">:test</span>)
<span class="linenr">197: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">198: </span>(atom nil)
<span class="linenr">199: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">200: </span>(atom '())
<span class="linenr">201: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<p>
However, they are not things that cannot be broken down any further:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">202: </span>(atom <span style="color: #2aa198;">"text"</span>)
<span class="linenr">203: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">204: </span>(atom #(1 2 3))
<span class="linenr">205: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<p>
Symbols are atoms as well:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">206: </span>(<span style="color: #859900;">defun</span> <span style="color: #268bd2;">test-atomicity</span> (x) (atom x))
<span class="linenr">207: </span>(atom 'test-atomicity)
<span class="linenr">208: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<p>
And lambda expressions:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">209: </span>(atom (<span style="color: #859900;">lambda</span> (x) (atom x)))
<span class="linenr">210: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
</pre>
</div>

<p>
Examples of some things that are not atoms:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">211: </span>(atom '(1 . 3))
<span class="linenr">212: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; NIL</span>
<span class="linenr">213: </span>(atom '(1 2 3))
<span class="linenr">214: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; NIL</span>
<span class="linenr">215: </span>(atom (cdr '(1 2 3)))
<span class="linenr">216: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; NIL</span>
</pre>
</div>

<p>
Conversion between types using coerce
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">217: </span>(coerce '(a b c) 'vector) =&gt;  #(A B C)
<span class="linenr">218: </span>(coerce 'a 'character) =&gt;  #\A
<span class="linenr">219: </span>(coerce 4.56 'complex) =&gt;  #C(4.56 0.0)
<span class="linenr">220: </span>(coerce 4.5s0 'complex) =&gt;  #C(4.5s0 0.0s0)
<span class="linenr">221: </span>(coerce 7/2 'complex) =&gt;  7/2
<span class="linenr">222: </span>(coerce 0 'short-float) =&gt;  0.0s0
<span class="linenr">223: </span>(coerce 3.5L0 'float) =&gt;  3.5L0
<span class="linenr">224: </span>(coerce 7/2 'float) =&gt;  3.5
<span class="linenr">225: </span>(coerce (cons 1 2) t) =&gt;  (1 . 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Sequences</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Sequences are ordered lists of elements and can be manipulated by a
variety of standard sequence functions. A sequence is either a
vector or a list. Vectors are one dimensional arrays and Lists are
linked lists made up of cons cells and are discussed <a href="#sec-5-2-3">here</a>.
</p>
</div>

<div id="outline-container-sec-5-2-1" class="outline-4">
<h4 id="sec-5-2-1">Arrays and Vectors</h4>
<div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li>simple array

<p>
Arrays are simple multi dimensional lists of fixed size with
elements that are arranged sequentially, rather than as a linked
list in the case of lisp lists:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">226: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">creates a 3 dimensional array with 10 elements in each dimensional</span>
<span class="linenr">227: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*array*</span> (make-array '(10 10 10)))
<span class="linenr">228: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">creates an array with all elements initialised to 23</span>
<span class="linenr">229: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*23-array*</span> (make-array '(10 10) <span style="color: #859900;">:initial-element</span> 23))
<span class="linenr">230: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">initialise with content</span>
<span class="linenr">231: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*fib*</span> (make-array '(5) <span style="color: #859900;">:initial-contents</span> '(1 2 3 5 8)))
<span class="linenr">232: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">set a value of an array element</span>
<span class="linenr">233: </span>(setf (aref *23-array* 5 5) 7)
<span class="linenr">234: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">an array with room for 2 elements, resizeable but empty</span>
<span class="linenr">235: </span>(<span style="color: #859900;">defparameter</span> <span style="color: #268bd2;">*resizeable*</span> (make-array '(2) <span style="color: #859900;">:fill-pointer</span> 0 <span style="color: #859900;">:adjustable</span> t))
<span class="linenr">236: </span>(vector-push 'a *resizeable*)
<span class="linenr">237: </span>(vector-push 'b *resizeable*)
<span class="linenr">238: </span>(vector-push-extend 'c *resizeable*)
<span class="linenr">239: </span>*resizeable*
<span class="linenr">240: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; #(A B C)</span>
<span class="linenr">241: </span>(vector-pop *resizeable*)
<span class="linenr">242: </span>*resizeable*
<span class="linenr">243: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; #(A B)</span>
<span class="linenr">244: </span>(adjust-array *resizeable* '(2))
</pre>
</div>

<ul class="org-ul">
<li>bit vector

<p>
Bit vector are efficient containers for bits that can be
manipulated with bitwise operations:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">245: </span>(bit-and #*1101000101000101 #*0100100010100101)
<span class="linenr">246: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">= &gt; #*0100000000000101</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-2-2" class="outline-4">
<h4 id="sec-5-2-2">Strings</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
A string is a specialized vector with elements of type
character. All the sequence functions <i>below</i> can be applied to
strings.
</p>

<ul class="org-ul">
<li>Manipulating the case of a string

<p>
The case of strings can be manipulated, either as a whole string
or based on a start and end index:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">247: </span>(string-upcase <span style="color: #2aa198;">"test"</span>)
<span class="linenr">248: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "TEST"</span>
<span class="linenr">249: </span>(string-downcase <span style="color: #2aa198;">"TEST"</span>)
<span class="linenr">250: </span>
<span class="linenr">251: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "test"</span>
<span class="linenr">252: </span>(string-capitalize <span style="color: #2aa198;">"sOmE stRIng"</span>)
<span class="linenr">253: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "Some String"</span>
<span class="linenr">254: </span>
<span class="linenr">255: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">all the string functions take a start and end key paramater</span>
<span class="linenr">256: </span>(string-upcase <span style="color: #2aa198;">"test"</span> <span style="color: #859900;">:start</span> 1 <span style="color: #859900;">:end</span> 3)
<span class="linenr">257: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "tESt"</span>
<span class="linenr">258: </span>
<span class="linenr">259: </span>(setq data <span style="color: #2aa198;">"test"</span>)
<span class="linenr">260: </span>
<span class="linenr">261: </span>(nstring-upcase (da a <span style="color: #859900;">:start</span> 2 <span style="color: #859900;">:end</span> 4)
<span class="linenr">262: </span>data
<span class="linenr">263: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "teST"</span>
</pre>
</div>

<ul class="org-ul">
<li>Trimming strings

<p>
Strings can be trimmed based on a list of characters, either
supplied as another string, or as an explicit list of
characters:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">264: </span>(string-trim <span style="color: #2aa198;">" "</span> <span style="color: #2aa198;">"   ddd "</span>)
<span class="linenr">265: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "ddd"</span>
<span class="linenr">266: </span>(string-trim <span style="color: #2aa198;">"."</span> <span style="color: #2aa198;">"...ddd "</span>)
<span class="linenr">267: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "ddd "</span>
<span class="linenr">268: </span>(string-left-trim <span style="color: #2aa198;">"."</span> <span style="color: #2aa198;">"...ddd..."</span>)
<span class="linenr">269: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "ddd..."</span>
<span class="linenr">270: </span>(string-right-trim <span style="color: #2aa198;">"."</span> <span style="color: #2aa198;">"..ddd..."</span>)
<span class="linenr">271: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "...ddd"</span>
<span class="linenr">272: </span>(string-left-trim <span style="color: #2aa198;">".ab"</span> <span style="color: #2aa198;">"ba...ddd..."</span>)
<span class="linenr">273: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "ddd..."</span>
<span class="linenr">274: </span>(string-right-trim '(#\Space #\e #\t) <span style="color: #2aa198;">" trim me "</span>)
<span class="linenr">275: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">" trim m"</span>
</pre>
</div>

<ul class="org-ul">
<li>Converting to and from symbols

<p>
symbols can be converted to strings and vice versa:
</p>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">276: </span>(symbol-name 'test)
<span class="linenr">277: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "TEST"</span>
<span class="linenr">278: </span>(symbol-name 'Test)
<span class="linenr">279: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "TEST"</span>
<span class="linenr">280: </span>(symbol-name '|Test|)
<span class="linenr">281: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "Test"</span>
<span class="linenr">282: </span>
<span class="linenr">283: </span>(intern <span style="color: #2aa198;">"TEST"</span>)
<span class="linenr">284: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; TEST</span>
<span class="linenr">285: </span>(intern <span style="color: #2aa198;">"test"</span>)
<span class="linenr">286: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; |test|</span>
<span class="linenr">287: </span>
<span class="linenr">288: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">a use of this could be to execute a command based on a string</span>
<span class="linenr">289: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">combined with a funcall:</span>
<span class="linenr">290: </span>(funcall (intern <span style="color: #2aa198;">"CONS"</span>) 1 2)
<span class="linenr">291: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (1 . 2)</span>
</pre>
</div>

<ul class="org-ul">
<li>Converting to and from strings
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">292: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">parsing integers from strins</span>
<span class="linenr">293: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">294: </span>(parse-integer <span style="color: #2aa198;">"123"</span>) 
<span class="linenr">295: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt;  123, 3</span>
<span class="linenr">296: </span>(parse-integer <span style="color: #2aa198;">"123"</span> <span style="color: #859900;">:start</span> 1 <span style="color: #859900;">:radix</span> 5) 
<span class="linenr">297: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt;  13, 3</span>
<span class="linenr">298: </span>(parse-integer <span style="color: #2aa198;">"no-integer"</span> <span style="color: #859900;">:junk-allowed</span> t) 
<span class="linenr">299: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt;  NIL, 0</span>
<span class="linenr">300: </span>
<span class="linenr">301: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">parse the printed representation of an object</span>
<span class="linenr">302: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">303: </span>(read-from-string <span style="color: #2aa198;">" 1 3 5"</span> t nil <span style="color: #859900;">:start</span> 2) 
<span class="linenr">304: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt;  3, 5</span>
<span class="linenr">305: </span>(read-from-string <span style="color: #2aa198;">"(a b c)"</span>) 
<span class="linenr">306: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt;  (A B C), 7</span>
<span class="linenr">307: </span>
<span class="linenr">308: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">combine with eval:</span>
<span class="linenr">309: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">310: </span>(eval (read-from-string <span style="color: #2aa198;">"(+ 1 2)"</span>))
<span class="linenr">311: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 3</span>
<span class="linenr">312: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">and combine with print</span>
<span class="linenr">313: </span>(print (eval (read-from-string <span style="color: #2aa198;">"(+ 1 2)"</span>)))
<span class="linenr">314: </span>
<span class="linenr">315: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">creating a printed representation of an object</span>
<span class="linenr">316: </span><span style="color: #586e75; font-style: italic;">;; </span>
<span class="linenr">317: </span>(write-to-string '(+ 1 2))
<span class="linenr">318: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "(+ 1 2)"</span>
<span class="linenr">319: </span>(<span style="color: #859900;">defmacro</span> <span style="color: #268bd2;">my-inc</span> (x) `(+ 1 ,x))
<span class="linenr">320: </span>(write-to-string (my-inc 2))
<span class="linenr">321: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "3"</span>
<span class="linenr">322: </span>(write-to-string '(my-inc 2))
<span class="linenr">323: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "(MY-INC 2)"</span>
<span class="linenr">324: </span>(write-to-string (macroexpand '(my-inc 2)))
<span class="linenr">325: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; "(+ 1 2)"</span>
</pre>
</div>

<ul class="org-ul">
<li>Comparing strings
</li>
</ul>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">326: </span>(string= <span style="color: #2aa198;">"test"</span> <span style="color: #2aa198;">"test"</span>)
<span class="linenr">327: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">328: </span>(string= <span style="color: #2aa198;">"test"</span> <span style="color: #2aa198;">"Test"</span>)
<span class="linenr">329: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; NIL</span>
<span class="linenr">330: </span>(string-equal <span style="color: #2aa198;">"test"</span> <span style="color: #2aa198;">"Test"</span>)
<span class="linenr">331: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">332: </span>(string= <span style="color: #2aa198;">"John C"</span> <span style="color: #2aa198;">"John D"</span> <span style="color: #859900;">:start1</span> 0 <span style="color: #859900;">:end1</span> 4 <span style="color: #859900;">:start2</span> 0 <span style="color: #859900;">:end2</span> 4)
<span class="linenr">333: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">334: </span>(string/= <span style="color: #2aa198;">"test"</span> <span style="color: #2aa198;">"test"</span>)
<span class="linenr">335: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; NIL</span>
<span class="linenr">336: </span>(string/= <span style="color: #2aa198;">"test"</span> <span style="color: #2aa198;">"Test"</span>)
<span class="linenr">337: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; T</span>
<span class="linenr">338: </span>(string-not-equal <span style="color: #2aa198;">"test"</span> <span style="color: #2aa198;">"Test"</span>)
<span class="linenr">339: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; NIL</span>
<span class="linenr">340: </span>
<span class="linenr">341: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">also lexical greater than less than equivalents:</span>
<span class="linenr">342: </span><span style="color: #586e75; font-style: italic;">;;</span>
<span class="linenr">343: </span>(string&lt; <span style="color: #2aa198;">"a"</span> <span style="color: #2aa198;">"ab"</span>)
<span class="linenr">344: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 1</span>
<span class="linenr">345: </span>(string&lt; <span style="color: #2aa198;">"ab"</span> <span style="color: #2aa198;">"abc"</span>)
<span class="linenr">346: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">347: </span>(string-lessp <span style="color: #2aa198;">"ab"</span> <span style="color: #2aa198;">"aBc"</span>)
<span class="linenr">348: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">349: </span>(string&gt; <span style="color: #2aa198;">"ab"</span> <span style="color: #2aa198;">"ab"</span>)
<span class="linenr">350: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; NIL</span>
<span class="linenr">351: </span>(string&gt;= <span style="color: #2aa198;">"ab"</span> <span style="color: #2aa198;">"ab"</span>)
<span class="linenr">352: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-2-3" class="outline-4">
<h4 id="sec-5-2-3">Lists</h4>
<div class="outline-text-4" id="text-5-2-3">
<p>
Cons cells are the basic data structure in lisp and provide a
building block for lots of different structures. A basic cons cell
can be constructed using cons:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">353: </span>(cons 1 2)
<span class="linenr">354: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (1 . 2)</span>
</pre>
</div>

<p>
This creates a dotted pair:
</p>


<div class="figure">
<p><img src="cons-cell.png" alt="cons-cell.png" />
</p>
</div>

<p>
When combined these cons cells can be used to create lists:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">355: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">A dotted list</span>
<span class="linenr">356: </span>(cons 1 (cons 2 (cons 3 4)))
<span class="linenr">357: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (1 2 3 . 4)</span>
<span class="linenr">358: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">A proper list</span>
<span class="linenr">359: </span>(cons 1 (cons 2 (cons 3 (cons 4 nil))))
<span class="linenr">360: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (1 2 3 4)</span>
</pre>
</div>

<p>
Although using list is a simpler way of achieving the creation of
lists:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">361: </span>(list 1 2 3 4)
<span class="linenr">362: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (1 2 3 4)</span>
</pre>
</div>

<p>
The elements of these lists can then be accessed with car and cdr
and various other functions of similar name:
</p>

<div class="org-src-container">

<pre class="src src-lisp"><span class="linenr">363: </span>(car '(1 2 3 4))
<span class="linenr">364: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 1</span>
<span class="linenr">365: </span>(cdr '(1 2 3 4))
<span class="linenr">366: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">(2 3 4)</span>
<span class="linenr">367: </span>(cadr '(1 2 3 4))
<span class="linenr">368: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; 2</span>
<span class="linenr">369: </span>(cddr '(1 2 3 4))
<span class="linenr">370: </span><span style="color: #586e75; font-style: italic;">;; </span><span style="color: #586e75; font-style: italic;">=&gt; (3 4)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-5-2-4" class="outline-4">
<h4 id="sec-5-2-4"><span class="todo NEXT">NEXT</span> Manipulating Sequences</h4>
<div class="outline-text-4" id="text-5-2-4">
<ul class="org-ul">
<li>concatenate
</li>
<li>copy-seq
</li>
<li>count
</li>
<li>count-if
</li>
<li>count-if-not
</li>
<li>delete
</li>
<li>delete-duplicates
</li>
<li>delete-if
</li>
<li>delete-if-not
</li>
<li>elt
</li>
<li>every
</li>
<li>fill
</li>
<li>find
</li>
<li>find-if
</li>
<li>find-if-not
</li>
<li>length
</li>
<li>map
</li>
<li>mapcar
</li>
<li>map-into
</li>
<li>merge
</li>
<li>mismatch
</li>
<li>notany
</li>
<li>notevery
</li>
<li>nreverse
</li>
<li>nsubstitute
</li>
<li>nsubstitute-if
</li>
<li>nsubstitute-if-not
</li>
<li>pop
</li>
<li>position
</li>
<li>position-if
</li>
<li>position-if-not
</li>
<li>reduce
</li>
<li>remove
</li>
<li>remove-duplicates
</li>
<li>remove-if
</li>
<li>remove-if-not
</li>
<li>replace
</li>
<li>reverse
</li>
<li>search
</li>
<li>some
</li>
<li>sort
</li>
<li>stable-sort
</li>
<li>subseq
</li>
<li>substitute
</li>
<li>substitute-if
</li>
<li>substitute-if-not
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="todo TODO">TODO</span> Hash Tables</h3>
</div>
<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="todo TODO">TODO</span> Trees</h3>
</div>
<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="todo TODO">TODO</span> Association Lists</h3>
</div>
<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="todo TODO">TODO</span> Property Lists</h3>
</div>
<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="todo TODO">TODO</span> Records</h3>
</div>
<div id="outline-container-sec-5-8" class="outline-3">
<h3 id="sec-5-8"><span class="todo TODO">TODO</span> Structures</h3>
</div>
<div id="outline-container-sec-5-9" class="outline-3">
<h3 id="sec-5-9"><span class="todo TODO">TODO</span> Classes</h3>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="todo TODO">TODO</span> Creating Variables</h2>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="todo TODO">TODO</span> Functions</h2>
<div class="outline-text-2" id="text-7">
<p>
currying / partial
no side effects
let / flet 
</p>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="todo TODO">TODO</span> Example 2</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="todo TODO">TODO</span> Decide on an example that uses the above.</h3>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="todo TODO">TODO</span> Declare, declaim, proclaim</h2>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="todo TODO">TODO</span> Control Operations</h2>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="todo TODO">TODO</span> Error Handling</h2>
<div class="outline-text-2" id="text-11">
<p>
Conditions and restarts
<a href="http://www.gigamonkeys.com/book/beyond-exception-handling-conditions-and-restarts.html">http://www.gigamonkeys.com/book/beyond-exception-handling-conditions-and-restarts.html</a>
</p>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="todo TODO">TODO</span> Lazyiness</h2>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="todo TODO">TODO</span> Streams</h2>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="todo TODO">TODO</span> Macro Dispatching Characters</h2>
<div class="outline-text-2" id="text-14">
<p>
set-macro-character
symbol macros
</p>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="todo TODO">TODO</span> Macros</h2>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="todo TODO">TODO</span> Multimethods</h2>
</div>
<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><span class="todo TODO">TODO</span> CLOS</h2>
<div class="outline-text-2" id="text-17">
<p>
<a href="http://www.aiai.ed.ac.uk/~jeff/clos-guide.html">http://www.aiai.ed.ac.uk/~jeff/clos-guide.html</a>
</p>
</div>
</div>

<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><span class="todo TODO">TODO</span> Packages</h2>
<div class="outline-text-2" id="text-18">
<p>
<a href="http://www.gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html">http://www.gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html</a>
</p>
</div>
</div>
<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19"><span class="todo TODO">TODO</span> Standard Libraries</h2>
</div>
<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20"><span class="todo TODO">TODO</span> Important Libraries</h2>
</div>
<div id="outline-container-sec-21" class="outline-2">
<h2 id="sec-21"><span class="todo TODO">TODO</span> Example 3</h2>
<div class="outline-text-2" id="text-21">
<p>
Some kind of web service?
</p>
</div>
</div>
<div id="outline-container-sec-22" class="outline-2">
<h2 id="sec-22"><span class="todo TODO">TODO</span> Working with GNU Emacs and Slime</h2>
</div>
<div id="outline-container-sec-23" class="outline-2">
<h2 id="sec-23"><span class="todo TODO">TODO</span> Something about read eval</h2>
</div>
<div id="outline-container-sec-24" class="outline-2">
<h2 id="sec-24"><span class="todo TODO">TODO</span> Something about lisp development workflow</h2>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: John Cumming</p>
<p class="date">Created: 2016-04-24 Sun 08:28</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
